<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Mobile Navigation Debug - TRAVIS INSKEEP</title>
    <link rel="stylesheet" href="assets/css/crt.css" />
    <style>
      /* Debug overlay */
      .debug-info {
        position: fixed;
        top: 10px;
        right: 10px;
        background: rgba(255, 0, 0, 0.9);
        color: white;
        padding: 10px;
        font-size: 12px;
        z-index: 9999;
        max-width: 200px;
        border-radius: 5px;
      }

      /* Visual viewport boundaries */
      .viewport-guide {
        position: fixed;
        border: 2px solid #00ff00;
        pointer-events: none;
        z-index: 9998;
      }

      .viewport-guide.top {
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
      }

      .viewport-guide.bottom {
        bottom: 0;
        left: 0;
        right: 0;
        height: 2px;
      }

      /* Navigation highlight */
      nav {
        outline: 2px solid #ff00ff !important;
        background: rgba(255, 0, 255, 0.1) !important;
      }

      footer {
        outline: 2px solid #ffff00 !important;
        background: rgba(255, 255, 0, 0.1) !important;
      }
    </style>
  </head>
  <body>
    <div class="debug-info">
      <div>Screen: <span id="screen-size"></span></div>
      <div>Viewport: <span id="viewport-size"></span></div>
      <div>UI Bottom Pad: <span id="ui-bottom-pad"></span></div>
      <div>Safe Area: <span id="safe-area"></span></div>
      <div>Nav Position: <span id="nav-position"></span></div>
      <div>Footer Position: <span id="footer-position"></span></div>
      <div>BG Rotation: <span id="bg-status"></span></div>
    </div>

    <div class="viewport-guide top"></div>
    <div class="viewport-guide bottom"></div>

    <div id="bg-container"></div>
    <div id="scanSweep"></div>

    <div class="crt-barrel-distortion">
      <svg width="100%" height="100%" class="svg-defs">
        <defs>
          <filter id="barrel-distortion">
            <feOffset dx="0" dy="0" />
            <feMorphology operator="dilate" radius="0.5" />
            <feGaussianBlur stdDeviation="0.3" />
            <feColorMatrix values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.4 0" />
          </filter>
        </defs>
      </svg>
    </div>

    <header>
      <h1 id="glitch-title" class="name-title">TRAVIS&nbsp;INSKEEP</h1>
      <nav>
        <ul id="nav-list">
          <li><a href="#about">About</a></li>
          <li><a href="#portfolio">Portfolio</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </header>

    <footer>
      <span>&copy; 2025 Travis Inskeep. All rights reserved.</span>
    </footer>

    <script>
      // Debug info updater
      function updateDebugInfo() {
        document.getElementById(
          "screen-size"
        ).textContent = `${screen.width}x${screen.height}`;
        document.getElementById(
          "viewport-size"
        ).textContent = `${window.innerWidth}x${window.innerHeight}`;

        const styles = getComputedStyle(document.documentElement);
        document.getElementById("ui-bottom-pad").textContent =
          styles.getPropertyValue("--ui-bottom-pad");
        document.getElementById(
          "safe-area"
        ).textContent = `${styles.getPropertyValue("padding-bottom")}`;

        const nav = document.querySelector("nav");
        const footer = document.querySelector("footer");
        const navRect = nav.getBoundingClientRect();
        const footerRect = footer.getBoundingClientRect();

        document.getElementById("nav-position").textContent = `${Math.round(
          navRect.bottom
        )}px from top, ${Math.round(
          window.innerHeight - navRect.bottom
        )}px from bottom`;
        document.getElementById("footer-position").textContent = `${Math.round(
          footerRect.top
        )}px from top`;

        // Check if nav is visible in viewport
        const isNavVisible =
          navRect.bottom <= window.innerHeight && navRect.top >= 0;
        document.getElementById("nav-position").style.color = isNavVisible
          ? "#00ff00"
          : "#ff0000";
      }

      let bgRotationCount = 0;

      // Override console.log to track background rotation
      const originalConsoleLog = console.log;
      console.log = function (...args) {
        if (args[0] && args[0].includes && args[0].includes("bg")) {
          bgRotationCount++;
          document.getElementById(
            "bg-status"
          ).textContent = `${bgRotationCount} rotations`;
        }
        originalConsoleLog.apply(console, args);
      };

      // Monitor background image changes
      let lastBgImage = "";
      function monitorBackgroundChanges() {
        const bgImages = document.querySelectorAll(".bg-image.active");
        const currentBg =
          bgImages.length > 0 ? bgImages[0].src.split("/").pop() : "none";
        if (currentBg !== lastBgImage) {
          lastBgImage = currentBg;
          bgRotationCount++;
          document.getElementById(
            "bg-status"
          ).textContent = `${currentBg} (#${bgRotationCount})`;
        }
      }

      setInterval(updateDebugInfo, 500);
      setInterval(monitorBackgroundChanges, 1000);
      updateDebugInfo();

      window.addEventListener("resize", updateDebugInfo);
      window.addEventListener("orientationchange", () => {
        setTimeout(updateDebugInfo, 500);
      });
    </script>

    <!-- Load all the CRT effects and background loader -->
    <script src="assets/js/CRTConfig.js"></script>
    <script src="assets/js/CRTResource.js"></script>
    <script src="assets/js/CRTSystem.js"></script>
    <script src="assets/js/crt-physics-enhanced.js"></script>
    <script src="assets/js/performance-monitor.js"></script>
    <script src="assets/js/crt-director.js"></script>
    <script src="assets/js/nav-glitch-enhanced.js"></script>
    <script src="assets/js/title-glitch-enhanced.js"></script>
    <script src="assets/js/crt-tracking-error.js"></script>
    <script src="assets/js/bg-loader.js"></script>
    <script src="assets/js/mini-windows.js"></script>
    <script src="assets/js/crt-effects.js"></script>

    <!-- Load SVG filters -->
    <div style="display: none">
      <iframe src="assets/html/svg-filters.html" style="display: none"></iframe>
    </div>
  </body>
</html>
