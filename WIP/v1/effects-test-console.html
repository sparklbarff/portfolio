<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CRT Effects Test Console</title>
    <style>
      body {
        background: #0a0a0a;
        color: #00ff00;
        font-family: 'Courier New', monospace;
        padding: 20px;
        margin: 0;
      }
      .test-panel {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.9);
        border: 2px solid #00ff00;
        padding: 15px;
        border-radius: 8px;
        z-index: 1000;
      }
      .test-button {
        display: block;
        width: 100%;
        margin: 5px 0;
        padding: 8px 12px;
        background: #001100;
        color: #00ff00;
        border: 1px solid #00ff00;
        cursor: pointer;
        border-radius: 4px;
        font-family: inherit;
      }
      .test-button:hover {
        background: #002200;
      }
      .status {
        color: #888;
        font-size: 12px;
        margin-top: 10px;
      }
      iframe {
        width: 100%;
        height: 80vh;
        border: 2px solid #333;
        border-radius: 4px;
      }
      h1 {
        color: #00ffc8;
        text-align: center;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>CRT Effects Test Console</h1>

    <div class="test-panel">
      <button class="test-button" onclick="triggerEffect('crtRetrace')">CRT Retrace</button>
      <button class="test-button" onclick="triggerEffect('vhsTracking')">VHS Tracking</button>
      <button class="test-button" onclick="triggerEffect('vhsDropout')">VHS Dropout</button>
      <button class="test-button" onclick="triggerEffect('vhsHeadSwitch')">Head Switch</button>
      <button class="test-button" onclick="triggerAll()">Trigger All</button>
      <div class="status" id="status">Ready to test effects...</div>
    </div>

    <iframe src="index.html" id="testFrame"></iframe>

    <script>
      function triggerEffect(effectId) {
        const iframe = document.getElementById('testFrame');
        const status = document.getElementById('status');

        try {
          const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
          const element = iframeDoc.getElementById(effectId);

          if (element) {
            // Remove active class first (if it exists)
            element.classList.remove('active');

            // Force reflow
            void element.offsetWidth;

            // Add active class to trigger animation
            element.classList.add('active');

            status.textContent = `✓ Triggered ${effectId}`;

            // Auto-remove after animation completes
            setTimeout(() => {
              element.classList.remove('active');
              status.textContent = `${effectId} completed`;
            }, 1000);
          } else {
            status.textContent = `✗ Element ${effectId} not found`;
          }
        } catch (error) {
          status.textContent = `✗ Error: ${error.message}`;
        }
      }

      function triggerAll() {
        const effects = ['crtRetrace', 'vhsTracking', 'vhsDropout', 'vhsHeadSwitch'];
        let index = 0;

        function triggerNext() {
          if (index < effects.length) {
            triggerEffect(effects[index]);
            index++;
            setTimeout(triggerNext, 800);
          }
        }

        triggerNext();
      }

      // Wait for iframe to load
      document.getElementById('testFrame').onload = function () {
        document.getElementById('status').textContent = 'Portfolio loaded - ready to test!';
      };
    </script>
  </body>
</html>
